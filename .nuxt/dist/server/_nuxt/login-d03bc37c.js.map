{"version":3,"file":"login-d03bc37c.js","sources":["../../../../pages/login.vue"],"sourcesContent":["<template>\r\n  <h1 class=\"text-3xl font-black text-center m-10\">Admin Login</h1>\r\n\r\n  <div>\r\n    <div class=\"card w-96 bg-base-100 shadow-xl pcenter\">\r\n      <div class=\"bg-red rounded-lg\">\r\n        <p id=\"error\" class=\"p-10\"></p>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            v-model=\"email\"\r\n            class=\"input input-bordered input-success w-full max-w-xs m-5 snap-center\"\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            v-model=\"password\"\r\n            class=\"input input-bordered input-success w-full max-w-xs m-5 snap-center\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            @click=\"login(email, password)\"\r\n            class=\"btn btn-success m-5 mb-5 btn-wide\"\r\n          >\r\n            Login\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Account, Client, Storage, ID, Databases } from \"appwrite\";\r\n\r\nconst client = new Client();\r\nclient\r\n  .setEndpoint(\"https://appwrite.nief.tech/v1\")\r\n  .setProject(\"65254ba2c6d13ae30a67\");\r\nconst account = new Account(client);\r\n\r\nconst router = useRouter();\r\nconst loggedInUser = ref(null);\r\nconst email = ref(\"\");\r\nconst password = ref(\"\");\r\nconst name = ref(\"\");\r\n\r\nconst login = async (email, password) => {\r\n  try {\r\n    await account.createEmailSession(email, password);\r\n    loggedInUser.value = await account.get();\r\n    router.push(\"/admin\"); // Navigate to the /admin route\r\n  } catch (error) {\r\n    console.error(error); // Log the error\r\n  }\r\n};\r\n\r\nconst logout = async () => {\r\n  await account.deleteSession(\"current\");\r\n  loggedInUser.value = null;\r\n  router.push(\"/\"); // Navigate to the home page after logout\r\n};\r\n\r\nif (!loggedInUser.value) {\r\n  router.push({\r\n    name: \"login\",\r\n    query: { source_path: \"/admin\" },\r\n  });\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  setup() {\r\n    return {\r\n      loggedInUser,\r\n      email,\r\n      password,\r\n      name,\r\n      login,\r\n      register,\r\n      logout,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.pcenter {\r\n  margin: auto;\r\n}\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>\r\n"],"names":["loggedInUser","email","password"],"mappings":";;;;;;;;;;;;;;;;;;;AA2EA,MAAA,cAAe;AAAA,EACb,QAAQ;AACN,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACN;AAAA,EACG;AACH;;;;;AAjDA,UAAM,SAAS,IAAI;AACnB,WACG,YAAY,+BAA+B,EAC3C,WAAW,sBAAsB;AACpB,QAAI,QAAQ,MAAM;AAElC,UAAM,SAAS,UAAS;AACxB,UAAMA,gBAAe,IAAI,IAAI;AAC7B,UAAMC,SAAQ,IAAI,EAAE;AACpB,UAAMC,YAAW,IAAI,EAAE;AACV,QAAI,EAAE;AAkBnB,QAAI,CAACF,cAAa,OAAO;AACvB,aAAO,KAAK;AAAA,QACV,MAAM;AAAA,QACN,OAAO,EAAE,aAAa,SAAU;AAAA,MACpC,CAAG;AAAA,IACH;;;;;;;;;;;;"}